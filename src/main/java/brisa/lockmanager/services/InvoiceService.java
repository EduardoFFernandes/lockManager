package brisa.lockmanager.services;

import java.io.ByteArrayOutputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

import org.thymeleaf.TemplateEngine;
import org.thymeleaf.context.Context;
import org.thymeleaf.templatemode.TemplateMode;
import org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;

import com.openhtmltopdf.pdfboxout.PdfRendererBuilder;

import brisa.lockmanager.Routes;
import brisa.lockmanager.models.Invoice;
import brisa.lockmanager.models.InvoiceItem;
import brisa.lockmanager.models.Item;
import brisa.lockmanager.models.Purchase;

public class InvoiceService implements Routes {

    public static byte[] generatePDF(Invoice invoice) throws FileNotFoundException, IOException {

        String result = parseThymeleafTemplate(invoice);

        try (
             ByteArrayOutputStream baos = new ByteArrayOutputStream()) {

            PdfRendererBuilder builder = new PdfRendererBuilder();
            builder.useFastMode();
            builder.withHtmlContent(result, "");
            builder.toStream(baos);
            builder.run();
            return baos.toByteArray();
        }

    }

    public static String parseThymeleafTemplate(Invoice invoice) {
        ClassLoaderTemplateResolver templateResolver = new ClassLoaderTemplateResolver();
        templateResolver.setSuffix(".html");
        templateResolver.setTemplateMode(TemplateMode.HTML);

        TemplateEngine templateEngine = new TemplateEngine();
        templateEngine.setTemplateResolver(templateResolver);

        Context context = new Context();
        context.setVariable("invoice", invoice);

        return templateEngine.process(PATH_TEMPLATE, context);
    }

    public static Invoice populateInvoice(Purchase object) {

        ArrayList<InvoiceItem> itens = getItens(object.getLstPurchaseItem());
        String companyName = "Brisa";
        String address = "Local da Brisa";
        String postal = "Postal da Brisa";
        String destinataryName = object.getClient().getName();
        String destinataryAdress = object.getClient().getAddress();
        String destinataryPostal = "Postal do destinatario";
        String termsAndConditions = "Termos e condições";
        String purchaseDate = object.getPurchaseDate().toString();
        String dueDate = object.getDueDate().toString();
        BigDecimal discount = new BigDecimal("20");
        BigDecimal taxRate = new BigDecimal("40");
        String image = "data:image/png;base64,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";

        Invoice invoice = new Invoice(itens, companyName, address, postal, destinataryName, destinataryAdress, destinataryPostal, termsAndConditions, purchaseDate, dueDate, discount, taxRate, image);

        return invoice;
    }

    private static ArrayList<InvoiceItem> getItens(List<Item> itens) {

        ArrayList<InvoiceItem> invoiceItens = new ArrayList<InvoiceItem>();

        itens.stream().forEach((item) -> {
            InvoiceItem invoiceItem = new InvoiceItem(item.getLock().getSerialNumber(), item.getNotes(), item.getPrice(), 1);
            invoiceItens.add(invoiceItem);
        });

        return invoiceItens;
    }
}
